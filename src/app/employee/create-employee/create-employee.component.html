<!--[formGroup] directive to bind view template to the form group model(in our case binding below form to employeeForm of type FormGroup declared in component.ts file).
Similary, using formControlName attribute to bind input control(eg. fullName) to its associated fullName instance of type FormControl declared in component.ts file, but
here we are binding to just string name.

Difference between formControlName vs [formControlName] is that in first one, formControlName was declared in FormGroup in component(which is our case), 
in second one is what is was declared as independent FormControl in component.

(ngSubmit) to bind method to handle submit action

Note: With brackets we bind variable, which is declared in our component. Without brackets we bind value of variable.
-->
<form class="form-horizontal" [formGroup]="employeeForm" (ngSubmit)="onSubmit()">
    <div class="card card-primary">
        <div class="card-header">
            <h3 class="card-title">Create Employee</h3>
        </div>
        <div class="card-block">
            <div class="form-group">
                <label class="col-sm-4 control-label" for="fullName">Full Name</label>
                <div class="col-sm-8">
                    <!--
                        1. Dynalically adding bootstrap class "is-invalid" using "[ngClass]" directive, to show red outline to input box, on condition that the textbox has been touched and left one time
                        and there is validation error
                        2. "invalid-feedback" bootstrap class: Showing error message in case of validation error by wrapping the message in this class
                        3. *ngIf - checking condition to show different message on different condition
                        4. (blur) - binding to lose focus event in parantheses ie. blur event
                    -->
                    <input class="form-control" id="fullName" formControlName="fullName" type="text"
                        [ngClass]="{'is-invalid': formErrors.fullName}" (blur)="logValidationErrors()">
                    <div class="invalid-feedback" *ngIf="formErrors.fullName">
                        <span>{{ formErrors.fullName }}</span>
                    </div>
                    <!-- Binding component property through interpolation -->
                    <!-- <label>{{ fullNameLength }}</label> -->
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-4 control-label">Contact Preference</label>
                <!-- Adding radio buttons for Proficiency field-->
                <div class="col-md-10">
                    <label class="radio-inline px-3">
                        <input class="form-control" formControlName="contactPreference" type="radio" value="email">
                        Email
                    </label>
                    <label class="radio-inline px-3">
                        <input class="form-control" formControlName="contactPreference" type="radio" value="phone">
                        Phone
                    </label>
                </div>
            </div>

            <div formGroupName="emailGroup">
                <div class="form-group">
                    <label class="col-sm-4 control-label" for="email">Email</label>
                    <div class="col-sm-8">
                        <input class="form-control" id="email" formControlName="email" type="text"
                            [ngClass]="{'is-invalid': formErrors.email }" (blur)="logValidationErrors()">
                        <div class="invalid-feedback" *ngIf="formErrors.email">
                            <span>{{ formErrors.email }}</span>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-sm-4 control-label" for="confirmEmail">Confirm Email</label>
                    <div class="col-sm-8">
                        <input class="form-control" id="confirmEmail" formControlName="confirmEmail" type="text"
                            [ngClass]="{'is-invalid': formErrors.confirmEmail || formErrors.emailGroup}"
                            (blur)="logValidationErrors()">
                        <div class="invalid-feedback" *ngIf="formErrors.confirmEmail || formErrors.emailGroup">
                            <span>{{ formErrors.confirmEmail ? formErrors.confirmEmail : formErrors.emailGroup }}</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-4 control-label" for="phone">Phone</label>
                <div class="col-sm-8">
                    <input class="form-control" id="phone" formControlName="phone" type="text"
                        [ngClass]="{'is-invalid': formErrors.phone}" (blur)="logValidationErrors()">
                    <div class="invalid-feedback" *ngIf="formErrors.phone">
                        <span>{{ formErrors.phone }}</span>
                    </div>
                </div>
            </div>

            <div formGroupName="skills">

                <div class="form-group">

                    <label class="col-sm-4 control-label" for="skillName">Skill</label>
                    <div class="col-sm-8 px-3">
                        <input class="form-control" id="skillName" formControlName="skillName" type="text"
                            [ngClass]="{'is-invalid': formErrors.skillName}" (blur)="logValidationErrors()">
                        <div class="invalid-feedback" *ngIf="formErrors.skillName">
                            <span>{{ formErrors.skillName }}</span>
                        </div>
                    </div>

                </div>

                <div class="form-group">
                    <label class="col-sm-4 control-label" for="experienceInYears">Experience (In Years)</label>
                    <div class="col-sm-8 px-3">
                        <input class="form-control" id="experienceInYears" formControlName="experienceInYears"
                            type="text" [ngClass]="{'is-invalid': formErrors.experienceInYears}"
                            (blur)="logValidationErrors()">
                        <div class="invalid-feedback" *ngIf="formErrors.experienceInYears">
                            <span>{{ formErrors.experienceInYears }}</span>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-md-2 control-label">Proficiency</label>
                    <!-- Adding radio buttons for Proficiency field-->
                    <div class="col-md-10">
                        <label class="radio-inline px-3">
                            <input class="form-control" formControlName="proficiency" type="radio" value="beginner"
                                (blur)="logValidationErrors()" [ngClass]="{'is-invalid': formErrors.proficiency}">
                            Beginner
                        </label>
                        <label class="radio-inline px-3">
                            <input class="form-control" formControlName="proficiency" type="radio" value="intermediate"
                                (blur)="logValidationErrors()" [ngClass]="{'is-invalid': formErrors.proficiency}">
                            Intermediate
                        </label>
                        <label class="radio-inline px-3">
                            <input class="form-control" formControlName="proficiency" type="radio" value="advanced"
                                (blur)="logValidationErrors()" [ngClass]="{'is-invalid': formErrors.proficiency}">
                            Advanced
                        </label>
                        <div class="invalid-feedback" *ngIf="formErrors.proficiency">
                            <span>{{ formErrors.proficiency }}</span>
                        </div>
                    </div>
                </div>

            </div>
        </div>
        <div class="card-footer">
            <button class="btn btn-primary mr-3" type="submit">Save</button>
            <button class="btn btn-primary" type="button" (click)="onLoadDataClick()">Load Data</button>
        </div>
    </div>
</form>

<br />
<br />


<table class="table table-striped table-bordered">
    <thead class="thead-dark">
        <tr>
            <th class="col">FormGroup</th>
            <th class="col">FormControl(fullName)</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <!-- employeeForm.value | json passing the value through a json pipe to display properly otherwise it would just display [object Object] -->
            <td>
                touched: {{ employeeForm.touched }} <br />
                dirty: {{ employeeForm.dirty }} <br />
                valid: {{ employeeForm.valid }} <br />
                value: {{ employeeForm.value | json }}
            </td>
            <td>
                touched: {{ employeeForm.controls.fullName.touched }} <br />
                dirty: {{ employeeForm.controls.fullName.dirty }} <br />
                valid: {{ employeeForm.controls.fullName.valid }} <br />
                value: {{ employeeForm.controls.fullName.value | json }} <br />
                error: {{ employeeForm.controls.fullName.errors | json }}
            </td>
        </tr>
    </tbody>
</table>